<!DOCTYPE html>
<html lang="ar" dir="rtl" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Coffee Guess â˜•</title>
    
    <meta name="theme-color" content="#212529">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="navbar fixed-top navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand fw-bold" style="color: var(--main-color) !important;" href="#"><i class="bi bi-cup-hot-fill"></i> Coffee Guess</a>
            <div class="d-flex gap-3 align-items-center">
                <button class="btn btn-outline-secondary border-0" onclick="toggleTheme()"><i id="themeIcon" class="bi bi-moon-stars-fill"></i></button>
                <button class="btn btn-outline-primary border-0" onclick="showRules()"><i class="bi bi-question-circle-fill fs-5"></i></button>
            </div>
        </div>
    </nav>
    <div style="height: 70px;"></div>

    <div class="container mt-3">
        
        <div id="scoreboard" class="d-flex gap-2 overflow-auto pb-2 mb-3" style="white-space: nowrap;"></div>

        <div id="loginScreen" class="game-card p-4 text-center">
            <h3 class="mb-3">Ù…ÙŠÙ† Ø¨ÙŠÙ„Ø¹Ø¨ØŸ</h3>
            <input type="text" id="usernameInput" class="form-control text-center mb-3" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ">
            <button onclick="login()" class="btn btn-primary w-100 py-2 rounded-pill fw-bold">ÙŠÙ„Ø§ Ø¨ÙŠÙ†Ø§ ðŸš€</button>
        </div>

        <div id="setupScreen" class="game-card p-4" style="display:none;">
            <div class="text-center mb-3">
                <div class="badge bg-warning text-dark mb-2">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø©</div>
                <h4>Ø¬Ù‡Ø² Ø§Ù„Ù„Ø¹Ø¨Ø© ÙŠØ§ Ø±ÙŠØ³</h4>
            </div>
            
            <div class="row g-2 mb-3">
                <div class="col-4">
                    <label class="form-label text-muted small">Ø§Ù„Ø£Ø±Ù‚Ø§Ù…</label>
                    <select id="digitsCount" class="form-select text-center fw-bold">
                        <option value="3">3</option>
                        <option value="4" selected>4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                <div class="col-4">
                    <label class="form-label text-muted small">Ø§Ù„ÙˆÙ‚Øª (Ø¯)</label>
                    <input type="number" id="gameDuration" class="form-control text-center fw-bold" value="2" min="1" max="60">
                </div>
                <div class="col-4">
                    <label class="form-label text-muted small">Ø§Ù„Ø¬ÙˆÙ„Ø§Øª</label>
                    <input type="number" id="cyclesCount" class="form-control text-center fw-bold" value="3" min="1" max="10">
                </div>
            </div>

            <div class="p-3 rounded mb-4 d-flex justify-content-between align-items-center" style="background: rgba(0,0,0,0.2);">
                <div>
                    <span class="fw-bold">ØªÙƒØ±Ø§Ø± Ø§Ù„Ø£Ø±Ù‚Ø§Ù…ØŸ</span>
                    <div id="dupesLabel" class="text-danger small fw-bold">Ù…Ù…Ù†ÙˆØ¹ (Ù…Ø«Ù„Ø§Ù‹ 1234)</div>
                </div>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="allowDuplicates" style="width: 3em; height: 1.5em;" onchange="updateDupesLabel()">
                </div>
            </div>

            <button onclick="startGame()" class="btn btn-success w-100 py-2 rounded-pill fw-bold">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ðŸ”¥</button>
        </div>

        <div id="gameScreen" style="display:none;">
            <div class="d-flex justify-content-between align-items-center mb-2 px-2">
                <span class="badge bg-secondary" id="cycleBadge">Ø¬ÙˆÙ„Ø© 1</span>
                <span id="timerDisplay" class="timer-box">00:00</span>
            </div>
            <div class="text-center mb-2">
                <span class="badge bg-info text-dark" id="gameModeDisplay"></span>
            </div>

            <div class="game-card p-3 sticky-top" style="z-index: 99; top: 75px;">
                <div class="d-flex gap-2">
                    <input type="number" id="myGuess" class="form-control text-center fs-4 letter-spacing-5" placeholder="????" enterkeyhint="go">
                    <button id="guessBtn" onclick="submitGuess()" class="btn btn-warning rounded-3 px-4"><i class="bi bi-send-fill"></i></button>
                </div>
                <div id="guessLockedMsg" class="text-warning small text-center mt-2 fw-bold" style="display:none;">
                    <i class="bi bi-lock-fill"></i> Ø®Ù…Ù†Øª Ø®Ù„Ø§Øµ! Ø§Ø³ØªÙ†Ù‰ Ø§Ù„Ø¬ÙˆÙ„Ø© ØªØ®Ù„Øµ.
                </div>
            </div>

            <div class="d-grid gap-2 mb-3">
                <button id="endRoundBtn" onclick="endRoundEarly()" class="btn btn-outline-warning rounded-pill fw-bold btn-sm">
                    <i class="bi bi-stop-circle"></i> Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                </button>

                <button id="nextCycleBtn" onclick="startNextCycle()" class="btn btn-primary rounded-pill shadow" style="display:none;">
                    <i class="bi bi-play-circle-fill"></i> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù„ÙŠ Ø¨Ø¹Ø¯Ù‡Ø§
                </button>

                <button id="resetBtn" onclick="resetGame()" class="btn btn-danger rounded-pill shadow" style="display:none;">
                    <i class="bi bi-arrow-repeat"></i> Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
                </button>
            </div>

            <div id="gameStatusAlert" class="alert text-center fw-bold" style="display:none;"></div>

            <div id="guessesList" class="pb-5"></div>
        </div>
    </div>

    <div id="exitFloatingBtn" style="display: none;">
        <button onclick="endGameImmediately()" 
                class="btn btn-danger rounded-circle shadow-lg position-fixed bottom-0 end-0 m-3 d-flex align-items-center justify-content-center" 
                style="width: 55px; height: 55px; z-index: 9999; border: 3px solid rgba(255,255,255,0.2);"
                title="Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ§Ù„Ù‡Ø±ÙˆØ¨">
            <i class="bi bi-door-open-fill fs-4"></i>
        </button>
    </div>

    <script src="index.js"></script>
</body>
</html>